"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8169],{33726:function(e,t,i){i.d(t,{CM:function(){return l},Fx:function(){return x},Kz:function(){return v},Mk:function(){return m},OL:function(){return r},Oj:function(){return o},RV:function(){return c},Sd:function(){return u},pe:function(){return d},ud:function(){return h},vV:function(){return p}});var s=i(54539),a=i(30656),n=i(53161);async function r(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(await s.g.currentAuthenticatedUser()).signInUserSession.idToken.jwtToken,o={action:"create",library_name:e,is_team_library:t,description:i.description||"",team_uuid:i.teamUUID||null,viewers_array:i.viewersArray||[],copy_accessers_array:i.copyAccessersArray||[],tags:i.tags||[],is_public:i.isPublic||!1,thumbnail_formation_uuid:i.thumbnailFormationUUID||null};return(0,a.Z)({method:"post",baseURL:"https://".concat(n.Z.create_edit_delete_library,".execute-api.us-east-1.amazonaws.com/prod"),headers:{Authorization:r},data:o})}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(await s.g.currentAuthenticatedUser()).signInUserSession.idToken.jwtToken,r={action:"edit",library_uuid:e,...t};return t.teamUUID&&(r.team_uuid=t.teamUUID,r.is_team_library=!0),(0,a.Z)({method:"post",baseURL:"https://".concat(n.Z.create_edit_delete_library,".execute-api.us-east-1.amazonaws.com/prod"),headers:{Authorization:i},data:r})}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=(await s.g.currentAuthenticatedUser()).signInUserSession.idToken.jwtToken,r={action:"delete",library_uuid:e};return t&&(r.team_uuid=t,r.is_team_library=!0),(0,a.Z)({method:"post",baseURL:"https://".concat(n.Z.create_edit_delete_library,".execute-api.us-east-1.amazonaws.com/prod"),headers:{Authorization:i},data:r})}async function d(e,t){let i=(await s.g.currentAuthenticatedUser()).signInUserSession.idToken.jwtToken;return(0,a.Z)({method:"post",baseURL:"https://".concat(n.Z.manage_formations_in_library,".execute-api.us-east-1.amazonaws.com/prod"),headers:{Authorization:i},data:{action:"add",library_uuid:e,formations:t,should_copy:!0}})}async function h(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(await s.g.currentAuthenticatedUser()).signInUserSession.idToken.jwtToken;return(0,a.Z)({method:"post",baseURL:"https://".concat(n.Z.manage_formations_in_library,".execute-api.us-east-1.amazonaws.com/prod"),headers:{Authorization:r},data:{action:"remove",library_uuid:e,formations:t,keep_copy:void 0===i.keepCopy||i.keepCopy}})}async function c(e){let t;let i={};try{let r=await s.g.currentAuthenticatedUser();return t=n.Z.authenticated_view_library,i.Authorization=r.signInUserSession.idToken.jwtToken,(0,a.Z)({method:"post",baseURL:"https://".concat(t,".execute-api.us-east-1.amazonaws.com/prod"),headers:i,data:{libraryUUID:e}})}catch(i){return t=n.Z.unauthenticated_view_library,(0,a.Z)({method:"post",baseURL:"https://"+t+".execute-api.us-east-1.amazonaws.com/prod?libraryUUID="+e})}}async function p(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=(await s.g.currentAuthenticatedUser()).signInUserSession.idToken.jwtToken,o={libraryUUID:e,modificationType:t};return i&&(o.targetUserEmail=i),(0,a.Z)({method:"post",baseURL:"https://".concat(n.Z.modify_library_permissions,".execute-api.us-east-1.amazonaws.com/prod"),headers:{Authorization:r},data:o})}async function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isTeamRequest:!1,teamUUID:null},t=(await s.g.currentAuthenticatedUser()).signInUserSession.idToken.jwtToken,i={isTeamRequest:e.isTeamRequest};return e.isTeamRequest&&e.teamUUID&&(i.teamUUID=e.teamUUID),(0,a.Z)({method:"post",baseURL:"https://".concat(n.Z.get_all_libraries,".execute-api.us-east-1.amazonaws.com/prod"),headers:{Authorization:t},data:i})}async function m(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];let i=(await s.g.currentAuthenticatedUser()).signInUserSession.idToken.jwtToken;return(0,a.Z)({method:"post",baseURL:"https://".concat(n.Z.manage_shows_in_library,".execute-api.us-east-1.amazonaws.com/prod"),headers:{Authorization:i},data:{action:"add",library_uuid:e,shows:t,should_copy:!0}})}async function x(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{keepCopy:!0},r=(await s.g.currentAuthenticatedUser()).signInUserSession.idToken.jwtToken;return(0,a.Z)({method:"post",baseURL:"https://".concat(n.Z.manage_shows_in_library,".execute-api.us-east-1.amazonaws.com/prod"),headers:{Authorization:r},data:{action:"remove",library_uuid:e,shows:t,keep_copy:i.keepCopy}})}async function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(await s.g.currentAuthenticatedUser()).signInUserSession.idToken.jwtToken;return(0,a.Z)({method:"post",baseURL:"https://".concat(n.Z.get_libraries_for_user,".execute-api.us-east-1.amazonaws.com/prod"),headers:{Authorization:t},data:{team_uuids:e}})}},51494:function(e,t,i){var s=i(52676),a=i(75271),n=i(59668),r=i.n(n);i(53161),i(66580),i(17730),i(78789),i(56412);var o=i(33019);i(1608),i(10188),i(11227);var l=i(30118),d=i(50372),h=i(6167),c=i(14890),p=i(17147),u=i(93186),m=i(25905),x=i(65105),v=i(29824),y=i(11914);class g extends a.Component{async componentDidMount(){await this.setState({isPlaying:this.props.isPlayingByDefault})}async handleUpdatePlaybackFromLocalStorageIfExists(e){if(!1==this.props.isPlayingByDefault){var t=this.state.visualizer;t.timeline.pause(),t.timeline.setTime(0),this.setState({visualizer:t})}if("1"==e){this.setState({playbackSpeed:"1x"});var t=this.state.visualizer;t.timeline.timeScale=1,this.setState({visualizer:t})}else if("2"==e){this.setState({playbackSpeed:"2x"});var t=this.state.visualizer;t.timeline.timeScale=2,this.setState({visualizer:t})}else if("4"==e){var t=this.state.visualizer;t.timeline.timeScale=4,this.setState({visualizer:t}),this.setState({playbackSpeed:"4x"})}else if("8"==e){this.setState({playbackSpeed:"8x"});var t=this.state.visualizer;t.timeline.timeScale=8,this.setState({visualizer:t})}}async updateTimelineIntervalFunctinoWhilePlaying(){void 0!=this.state.visualizer&&void 0!=this.state.visualizer.timeline&&void 0!=this.scrollBarParentRef&&void 0!=this.scrollBarParentRef.current&&void 0!=this.scrollBarParentRef.current.getBoundingClientRect()&&(this.setState({timelinePosition:this.state.visualizer.timeline.animationTime}),this.setState({scrollBarChildLeftValue:this.scrollBarParentRef.current.getBoundingClientRect().left+this.state.visualizer.timeline.animationTime%this.state.formationLengthInSeconds/this.state.formationLengthInSeconds*300}))}async componentWillUnmount(){clearInterval(this.checkIfFinishedInterval)}async handleClickToNewPosition(e){var t=e.pageX-7.5-this.scrollBarParentRef.current.getBoundingClientRect().left;if(t<0||t>300){var i=0,s=this.state.visualizer;s.timeline.setTime(i),this.setState({visualizer:s})}else{var i=t/300*this.state.formationLengthInSeconds,s=this.state.visualizer;s.timeline.setTime(i),this.setState({visualizer:s})}}async handleClickPlayPause(){if(this.state.isPlaying){var e=this.state.visualizer;e.timeline.pause(),this.setState({visualizer:e,isPlaying:!1}),this.props.updateIsPlayingByDefault(!1)}else{var e=this.state.visualizer;e.timeline.play(),this.setState({visualizer:e,isPlaying:!0}),this.props.updateIsPlayingByDefault(!0)}}async handleJumpToInputtedTime(){try{var e=Number(this.state.timeToJumpTo),t=this.state.visualizer;t.timeline.setTime(e),this.setState({visualizer:t,timeToJumpTo:""})}catch(i){var e=0,t=this.state.visualizer;t.timeline.setTime(e),this.setState({visualizer:t,timeToJumpTo:""})}}async handleJumpToInputtedFrame(){var e=this.state.frameToJumpTo%(24*this.state.formationLengthInSeconds),t=this.state.visualizer;t.timeline.setTime(e/24),this.setState({visualizer:t,frameToJumpTo:e})}async handleIncrementByFrame(e){var t=this.state.visualizer,i=Number(this.state.visualizer.timeline.animationTime)+Number(e)/24;t.timeline.setTime(i),this.setState({visualizer:t})}async handleUpdatePlaybackSpeed(){await this.props.handleTogglePlaybackSpeed();var e=this.state.visualizer,t=Number(this.props.playbackSpeed.replace("x",""));e.timeline.timeScale=t,this.setState({visualizer:e})}render(){return(0,s.jsx)("div",{className:r().standardCenteredDiv,style:{width:this.props.windowSize.width<650?"300px":"450px",backgroundColor:"black"},children:null==this.props.framesData?(0,s.jsx)("div",{className:r().standardCenteredDiv,style:{width:this.props.windowSize.width<this.props.mobileBreakpoint?this.props.windowSize.width:this.props.viewerSize,border:"0px solid red",overflow:"hidden",borderRadius:this.props.windowSize.width<this.props.mobileBreakpoint?"0px":"35px",minHeight:this.props.windowSize.width<this.props.mobileBreakpoint?"300px":this.props.viewerSize,marginLeft:void 0==this.props.windowSize?"0px":this.props.windowSize.width>this.props.mobileBreakpoint?"250px":"0px",backgroundColor:"#000"},children:(0,s.jsxs)("div",{className:r().standardCenteredDiv,children:[(0,s.jsx)(l.Z,{}),(0,s.jsx)("div",{style:{height:"15px"}}),(0,s.jsx)("text",{className:r().alternateTextBody,style:{pointerEvents:"none",userSelect:"none",fontSize:"15px",color:"#fff"},children:"Loading 3d preview..."})]})}):(0,s.jsxs)("div",{className:r().standardCenteredDiv,style:{width:this.props.viewerSize,minHeight:this.props.viewerSize,backgroundColor:"black",justifyContent:"flex-start"},children:[(0,s.jsx)("div",{className:r().standardCenteredDiv,style:{marginRight:"0px",borderRadius:"35px",overflow:"hidden"},children:(0,s.jsx)(o.Z,{isPaused:!1,speedFactorFromParent:Number(this.props.playbackSpeed.replace("x","")),setVisualizerInParent:e=>{this.setState({visualizer:e})},widthFromParent:this.props.windowSize.width<this.props.mobileBreakpoint?300:400,viewerSize:this.props.viewerSize,setActiveFrameInParent:e=>{this.setState({activeFrameFromPlayer:e})},framesDataFromParent:this.props.framesData,isFormation2D:!1})}),this.props.areControlsHidden?null:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:r().standardCenteredDiv,style:{flexDirection:"row",marginTop:"7.5px"},children:[(0,s.jsx)(v.E.div,{onClick:()=>this.state.visualizer.timeline.setTime(0),className:r().standardCenteredDiv,style:{width:"30px",cursor:"pointer",height:"30px",borderRadius:"10px",backgroundColor:"#333"},whileHover:{scale:1.05},whileTap:{scale:.9},children:(0,s.jsx)(d.k,{color:"white",size:18})}),(0,s.jsx)("div",{style:{minWidth:"15px"}}),(0,s.jsx)(v.E.div,{onClick:()=>this.handleClickPlayPause(),className:r().standardCenteredDiv,style:{width:"30px",cursor:"pointer",height:"30px",borderRadius:"10px",backgroundColor:"#333"},whileHover:{scale:1.05},whileTap:{scale:.9},children:this.state.isPlaying?(0,s.jsx)(h.k,{color:"white",size:18}):(0,s.jsx)(c.k,{color:"white",size:18})}),(0,s.jsx)("div",{style:{minWidth:"15px"}}),(0,s.jsx)(v.E.div,{onClick:()=>this.handleTogglePlaybackSpeed(),className:r().standardCenteredDiv,style:{width:"30px",cursor:"pointer",height:"30px",borderRadius:"10px",backgroundColor:"#333"},whileHover:{scale:1.05},whileTap:{scale:.9},children:(0,s.jsx)("text",{className:r().alternateTextBody,style:{fontSize:"15px",color:"white",fontWeight:"500"},children:this.props.playbackSpeed})}),(0,s.jsx)("div",{style:{minWidth:"15px"}}),(0,s.jsxs)("div",{className:r().standardCenteredDiv,children:[(0,s.jsx)("text",{className:r().alternateTextBody,style:{fontSize:"10px",color:"#333",fontWeight:"400"},children:"Jump to Time:"}),(0,s.jsx)("div",{style:{minHeight:"3.5px"}}),(0,s.jsx)(y.h3,{value:this.state.timeToJumpTo,onChange:e=>{},onValueChange:e=>{this.setState({timeToJumpTo:e.value})},suffix:"s",displayType:"input",thousandSeparator:!1,decimalScale:2,allowNegative:!1,onBlur:()=>{this.handleJumpToInputtedTime()},onKeyDown:e=>{"Enter"==e.key&&this.handleJumpToInputtedTime()},style:{marginBottom:"15px",marginLeft:"15px",fontFamily:"Work Sans",color:"#666",border:"1px solid #cecece",paddingLeft:"10px",fontSize:"16px",fontWeight:"400",width:"45px",borderRadius:"5px",height:"32.5px",outline:"none"}})]}),(0,s.jsx)("div",{style:{minWidth:"15px"}}),(0,s.jsxs)("div",{className:r().standardCenteredDiv,children:[(0,s.jsx)("text",{className:r().alternateTextBody,style:{fontSize:"10px",color:"#333",fontWeight:"400"},children:"Jump to Frame:"}),(0,s.jsx)("div",{style:{minHeight:"3.5px"}}),(0,s.jsx)(y.h3,{value:this.state.frameToJumpTo,onChange:e=>{},onValueChange:e=>{this.setState({frameToJumpTo:e.value})},displayType:"input",thousandSeparator:!1,decimalScale:1,allowNegative:!1,onBlur:()=>{this.handleJumpToInputtedFrame()},onKeyDown:e=>{"Enter"==e.key&&this.handleJumpToInputtedTime()},style:{marginBottom:"15px",marginLeft:"15px",fontFamily:"Work Sans",color:"#666",border:"1px solid #cecece",paddingLeft:"10px",fontSize:"14px",fontWeight:"400",width:"65px",borderRadius:"5px",height:"32.5px",outline:"none"}})]})]}),(0,s.jsx)("div",{style:{minHeight:"0px"}}),(0,s.jsxs)("div",{className:r().standardCenteredDiv,style:{flexDirection:"row"},children:[(0,s.jsx)(v.E.div,{onClick:()=>{this.handleIncrementByFrame(-4)},className:r().standardCenteredDiv,style:{cursor:"pointer"},whileHover:{scale:1.2},whileTap:{scale:.95},children:(0,s.jsx)(p.P,{size:17.5,color:"#555"})}),(0,s.jsx)("div",{style:{width:"7.5px"}}),(0,s.jsx)(v.E.div,{onClick:()=>{this.handleIncrementByFrame(-1)},className:r().standardCenteredDiv,style:{cursor:"pointer"},whileHover:{scale:1.2},whileTap:{scale:.95},children:(0,s.jsx)(u.q,{size:17.5,color:"#555"})}),(0,s.jsx)("div",{style:{width:"7.5px"}}),(0,s.jsx)(v.E.div,{onClick:()=>{this.handleIncrementByFrame(1)},className:r().standardCenteredDiv,style:{cursor:"pointer"},whileHover:{scale:1.2},whileTap:{scale:.95},children:(0,s.jsx)(m.$,{size:17.5,color:"#555"})}),(0,s.jsx)("div",{style:{width:"7.5px"}}),(0,s.jsx)(v.E.div,{onClick:()=>{this.handleIncrementByFrame(4)},className:r().standardCenteredDiv,style:{cursor:"pointer"},whileHover:{scale:1.2},whileTap:{scale:.95},children:(0,s.jsx)(x.I,{size:17.5,color:"#555"})}),(0,s.jsx)("div",{style:{width:"7.5px"}})]}),void 0==this.state.visualizer?null:!0==this.props.hideScrubBar?null:(0,s.jsx)("div",{className:r().standardCenteredDiv,ref:this.scrollBarParentRef,onClick:e=>{this.handleClickToNewPosition(e)},style:{cursor:"pointer",flexDirection:"row",marginTop:"10px",backgroundColor:"#f5f5f5",width:"300px",minHeight:"15px",height:"15px",borderRadius:"15px"},children:null==this.scrollBarParentRef?null:null==this.scrollBarParentRef.current?null:void 0==this.scrollBarParentRef.current.getBoundingClientRect()?null:(0,s.jsx)("div",{ref:this.scrollBarRef,style:{position:"absolute",left:this.state.scrollBarChildLeftValue,width:"15px",height:"15px",borderRadius:"15px",backgroundColor:"#333"}})}),(0,s.jsx)("div",{style:{minHeight:"10px"}}),(0,s.jsxs)("div",{className:r().standardCenteredDiv,style:{flexDirection:"row"},children:[!0==this.props.hideScrubBar||void 0==this.state.formationLengthInSeconds||null==this.state.formationLengthInSeconds||0==this.state.formationLengthInSeconds?null:(0,s.jsxs)("text",{className:r().alternateTextBody,style:{userSelect:"none",pointerEvents:"none"},children:[" ",(this.state.timelinePosition%Number(this.state.formationLengthInSeconds)).toFixed(2),"s / ",this.state.formationLengthInSeconds.toFixed(2),"s "]}),(0,s.jsx)("div",{style:{minWidth:"25px"}}),void 0==this.state.visualizer?null:void 0==this.state.visualizer.timeline?null:!0==this.props.hideScrubBar||void 0==this.state.formationLengthInSeconds||null==this.state.formationLengthInSeconds||0==this.state.formationLengthInSeconds?null:(0,s.jsxs)("text",{className:r().alternateTextBody,style:{userSelect:"none",pointerEvents:"none"},children:["Frame ",(24*this.state.visualizer.timeline.animationTime%(24*this.state.formationLengthInSeconds)).toFixed(0)," / ",(24*Number(this.state.formationLengthInSeconds)).toFixed(0)]})]})]}),!0==this.props.areLibraryCarouselControlsVisible?(0,s.jsx)("div",{style:{position:this.props.isInComponent?"relative":"fixed",bottom:this.props.isInComponent?90:this.props.isInEmbedMode?85:40,zIndex:12},children:(0,s.jsxs)("div",{className:r().standardCenteredDiv,style:{flexDirection:"row",marginTop:"7.5px",zIndex:12},children:[(0,s.jsx)(v.E.div,{onClick:()=>this.state.visualizer.timeline.setTime(0),className:r().standardCenteredDiv,style:{width:"30px",cursor:"pointer",height:"30px",borderRadius:"10px",backgroundColor:"#333"},whileHover:{scale:1.05},whileTap:{scale:.9},children:(0,s.jsx)(d.k,{color:"white",size:18})}),(0,s.jsx)("div",{style:{minWidth:"15px"}}),(0,s.jsx)(v.E.div,{onClick:()=>this.handleClickPlayPause(),className:r().standardCenteredDiv,style:{width:"30px",cursor:"pointer",height:"30px",borderRadius:"10px",backgroundColor:"#333"},whileHover:{scale:1.05},whileTap:{scale:.9},children:this.state.isPlaying?(0,s.jsx)(h.k,{color:"white",size:18}):(0,s.jsx)(c.k,{color:"white",size:18})}),(0,s.jsx)("div",{style:{minWidth:"15px"}}),(0,s.jsx)(v.E.div,{onClick:()=>this.handleUpdatePlaybackSpeed(),className:r().standardCenteredDiv,style:{width:"30px",cursor:"pointer",height:"30px",borderRadius:"10px",backgroundColor:"#333"},whileHover:{scale:1.05},whileTap:{scale:.9},children:(0,s.jsx)("text",{className:r().alternateTextBody,style:{fontSize:"15px",color:"white",fontWeight:"500"},children:this.props.playbackSpeed})})]})}):null]})})}constructor(){super(),this.scrollBarRef=a.createRef(),this.scrollBarParentRef=a.createRef(),this.state={formationUUID:"",formationLengthInSeconds:0,offsetFromLastDrag:0,isPlaying:!1,formationLengthInSeconds:0,timelinePosition:0,playbackSpeed:"1x",timeToJumpTo:1}}}t.Z=g}}]);